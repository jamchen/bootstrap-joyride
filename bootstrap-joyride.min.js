(function(){"use strict";function t(t){return this.each(function(){var e=o(this),n="object"==typeof t&&t,r=e.data("am.boot-joyride");r?n&&r.init(this,n):e.data("am.boot-joyride",r=new i(this,n)),"string"==typeof t&&r[t]()})}var o,e;o=jQuery,e=function(t,o,e){var i,n,r,s;return arguments.length>1&&"[object Object]"!==String(o)?(e=jQuery.extend({},e),null==o&&(e.expires=-1),"number"==typeof e.expires&&(i=e.expires,s=e.expires=new Date,s.setDate(s.getDate()+i)),o=String(o),document.cookie=[encodeURIComponent(t),"=",e.raw?o:encodeURIComponent(o),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")):(e=o||{},r=void 0,n=e.raw?function(t){return t}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?n(r[1]):null)};var i=function(t,o){this.$current_target=this.$current_popover=this.$element=this.current_step=this.options=null,this.init(t,o)};if(!o.fn.popover)throw new Error("Boot-Joyride requires popover.js");i.DEFAULTS={tipContent:"#JoyrideTipContent",cookieMonster:!1,cookieName:"bootstrapJoyride",cookieDomain:!1,preRideCallback:o.noop,postRideCallback:o.noop,postStepCallback:o.noop,nextOnClose:!1,debug:!1,additionalPopoverClass:null},i.prototype.init=function(t,e){this.options=o.extend({},this.getDefaults(),e),this.$element=o(t);var i,n,r=this,s=o(),p=o(this.options.tipContent).first();return null==p&&this.log("can't find tipContent from selector: "+this.options.tipContent),i=p.find("li"),this.$element.data("tips",i),n=this.currentStep(),this.log("first step: "+n),n>i.length?void this.log("tour already completed, skipping"):(i.each(function(t){var e,p,a,l;if(n-1>t)return void r.log("skipping step: "+(t+1));if(e=o(this),l=e.data(),a=l.target,null!=a){if(p=o(a,r.$element).first(),!p.length&&(p=o(a).first(),!p.length))return void r.log("no target found: "+a);var c="";l.titleiconclass&&(c='<span class="'+l.titleiconclass+'"></span>&nbsp;'),p.popover({html:!0,trigger:"manual|focus",title:l.title?c+l.title+'  <a class="tour-tip-close close" data-touridx="'+(t+1)+'">&times;</a>':null,content:"<p>"+e.html()+'</p><p style="text-align: right"><a href="#" class="tour-tip-next btn" data-touridx="'+(t+1)+'">'+(t+1<i.length?'Next <i class="icon-chevron-right"></i>':'<i class="icon-ok"></i> Done')+"</a></p>",placement:l.placement||"right",container:l.container?o(l.container):!1,viewport:l.viewport?o(l.viewport):"{ selector: 'body', padding: 0 }"}),p.popover("tip");var h=p.data("bs.popover").$tip;if(s.push(h),l["class"]&&h.addClass(l["class"]),r.options.additionalPopoverClass&&h.addClass(r.options.additionalPopoverClass),e.data("targetElement",p),t===n-1){r.options.preRideCallback!==o.noop&&r.options.preRideCallback(r.$element),r.current_step=t+1,r.$current_target=p,r.$current_popover=r.$current_target.data("bs.popover"),p.popover("show");var u=h.offset().top-(o(window).height()/2-h.height()/2);return o("html, body").animate({scrollTop:u},500),p}}}),void s.each(function(t){this.on("click","a.tour-tip-close",o.proxy(r.onClose,r)),this.on("click","a.tour-tip-next",o.proxy(r.onNext,r))}))},i.prototype.onClose=function(t){return t.preventDefault(),t.stopPropagation(),this.stop(this.options.nextOnClose)},i.prototype.onNext=function(t){t.preventDefault(),t.stopPropagation();var e,i,n;e=this.current_step,this.log("current step: "+e);var r=this.$current_target;if(r&&(r.data("bs.popover")?r.popover("hide"):this.$current_popover&&this.$current_popover.hide()),this.options.postStepCallback!==o.noop&&this.options.postStepCallback(e),i=null!=(n=o(this.options.tipContent).first().find("li:nth-child("+(e+1)+")"))?n.data("targetElement"):void 0,this.setCookieStep(e+1),this.current_step=this.current_step+1,null!=i){this.$current_target=i,this.$current_popover=this.$current_target.data("bs.popover"),i.popover("show");var s=i.data("bs.popover").$tip;if(s){var p=s.offset().top-(o(window).height()/2-s.height()/2);o("html, body").animate({scrollTop:p},500)}return i}return this.options.postRideCallback!==o.noop?this.options.postRideCallback(this.$element):void 0},i.prototype.stop=function(t){var o;o=this.current_step;var e=this.$current_target;return e&&e.data("bs.popover")?e.popover("hide"):this.$current_popover&&this.$current_popover.hide(),t&&this.setCookieStep(o+1),this.options.postRideCallback(this.$element)};var n=!1;i.prototype.restart=function(){this.stop(n),this.init(this.$element,this.options)},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.log=function(t){return this.options.debug&&"undefined"!=typeof console&&null!==console?console.log("[bootstrap-tour]",t):void 0},i.prototype.currentStep=function(){var t;if(null==this.options.cookieMonster)return 1;if(t=e(this.options.cookieName),null==t)return 1;try{return parseInt(t)}catch(o){return 1}},i.prototype.setCookieStep=function(t){return this.options.cookieMonster?e(this.options.cookieName,""+t,{expires:365,domain:this.options.cookieDomain}):void 0},o.fn.bootJoyride=t}).call(this);