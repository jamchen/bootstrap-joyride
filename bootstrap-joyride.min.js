(function(){"use strict";function t(t){return this.each(function(){var o=e(this),n="object"==typeof t&&t,r=o.data("am.boot-joyride");r?n&&r.init(this,n):o.data("am.boot-joyride",r=new i(this,n)),"string"==typeof t&&r[t]()})}var e,o;e=jQuery,o=function(t,e,o){var i,n,r,s;return arguments.length>1&&"[object Object]"!==String(e)?(o=jQuery.extend({},o),null==e&&(o.expires=-1),"number"==typeof o.expires&&(i=o.expires,s=o.expires=new Date,s.setDate(s.getDate()+i)),e=String(e),document.cookie=[encodeURIComponent(t),"=",o.raw?e:encodeURIComponent(e),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")):(o=e||{},r=void 0,n=o.raw?function(t){return t}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?n(r[1]):null)};var i=function(t,e){this.$current_target=this.$current_popover=this.$element=this.current_step=this.options=null,this.init(t,e)};if(!e.fn.popover)throw new Error("Boot-Joyride requires popover.js");i.DEFAULTS={tipContent:"#JoyrideTipContent",cookieMonster:!1,cookieName:"bootstrapJoyride",cookieDomain:!1,preRideCallback:e.noop,postRideCallback:e.noop,postStepCallback:e.noop,nextOnClose:!1,debug:!1,additionalPopoverClass:null},i.prototype.init=function(t,o){this.options=e.extend({},this.getDefaults(),o),this.$element=e(t);var i,n,r=this,s=e(),p=e(this.options.tipContent).first();return null==p&&this.log("can't find tipContent from selector: "+this.options.tipContent),i=p.find("li"),this.$element.data("tips",i),n=this.currentStep(),this.log("first step: "+n),n>i.length?void this.log("tour already completed, skipping"):(i.each(function(t){var o,p,a,l;if(n-1>t)return void r.log("skipping step: "+(t+1));if(o=e(this),l=o.data(),a=l.target,null!=a){if(p=e(a,r.$element).first(),!p.length&&(p=e(a).first(),!p.length))return void r.log("no target found: "+a);var c="";l.titleiconclass&&(c='<span class="'+l.titleiconclass+'"></span>&nbsp;'),p.popover({html:!0,trigger:"manual|focus",title:l.title?c+l.title+'  <a class="tour-tip-close close" data-touridx="'+(t+1)+'">&times;</a>':null,content:"<p>"+o.html()+'</p><p style="text-align: right"><a href="#" class="tour-tip-next btn" data-touridx="'+(t+1)+'">'+(t+1<i.length?'Next <i class="icon-chevron-right"></i>':'<i class="icon-ok"></i> Done')+"</a></p>",placement:l.placement||"right",container:l.container?e(l.container):!1,viewport:l.viewport?e(l.viewport):{selector:"body",padding:0}}),p.popover("tip");var h=p.data("bs.popover").$tip;if(s.push(h),l["class"]&&h.addClass(l["class"]),r.options.additionalPopoverClass&&h.addClass(r.options.additionalPopoverClass),o.data("targetElement",p),t===n-1){if(!p.is(":visible"))return this.log("first_step is invisible, skip it."),n++,p;r.options.preRideCallback!==e.noop&&r.options.preRideCallback(r.$element),r.current_step=t+1,r.$current_target=p,r.$current_popover=r.$current_target.data("bs.popover"),p.popover("show");var u=h.offset().top-(e(window).height()/2-h.height()/2);return e("html, body").animate({scrollTop:u},500),p}}}),void s.each(function(t){this.on("click","a.tour-tip-close",e.proxy(r.onClose,r)),this.on("click","a.tour-tip-next",e.proxy(r.onNext,r))}))},i.prototype.onClose=function(t){return t.preventDefault(),t.stopPropagation(),this._stop(this.options.nextOnClose)},i.prototype.onNext=function(t){t.preventDefault(),t.stopPropagation(),this._onNext()},i.prototype._onNext=function(){var t,o,i;t=this.current_step,this.log("current step: "+t);var n=this.$current_target;if(n&&(n.data("bs.popover")?n.popover("hide"):this.$current_popover&&this.$current_popover.hide()),this.options.postStepCallback!==e.noop&&this.options.postStepCallback(t),o=null!=(i=e(this.options.tipContent).first().find("li:nth-child("+(t+1)+")"))?i.data("targetElement"):void 0,this.setCookieStep(t+1),this.current_step=this.current_step+1,null!=o){if(!o.is(":visible"))return this.log("next_tip is invisible, skip it."),this._onNext();this.$current_target=o,this.$current_popover=this.$current_target.data("bs.popover"),o.popover("show");var r=o.data("bs.popover").$tip;if(r){var s=r.offset().top-(e(window).height()/2-r.height()/2);e("html, body").animate({scrollTop:s},500)}return o}return this.log("No next step. End tour."),this.options.postRideCallback!==e.noop?this.options.postRideCallback(this.$element):void 0},i.prototype._stop=function(t){var e;e=this.current_step;var o=this.$current_target;return o&&o.data("bs.popover")?o.popover("hide"):this.$current_popover&&this.$current_popover.hide(),t&&(this.log("skip current step next time."),this.setCookieStep(e+1)),this.options.postRideCallback(this.$element)};var n=!1,r=!0;i.prototype.stop=function(){this._stop(r)},i.prototype.restart=function(){this._stop(n),this.init(this.$element,this.options)},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.log=function(t){return this.options.debug&&"undefined"!=typeof console&&null!==console?console.log("[bootstrap-tour]",t):void 0},i.prototype.currentStep=function(){var t;if(null==this.options.cookieMonster)return 1;if(t=o(this.options.cookieName),null==t)return 1;try{return parseInt(t)}catch(e){return 1}},i.prototype.setCookieStep=function(t){return this.options.cookieMonster?o(this.options.cookieName,""+t,{expires:365,domain:this.options.cookieDomain}):void 0},e.fn.bootJoyride=t}).call(this);